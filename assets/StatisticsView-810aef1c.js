import{a as V,_ as j,o as v,f as y,h as u,m as b,s as D,k as S,l as E,u as w,n as o,q as B,p as F,d as s,t as l}from"./index-cc35cce3.js";import{c as A,d as z,b as L}from"./dropdown.esm-956ce419.js";var x=`
@layer primevue {
    .p-chart {
        position: relative;
    }
}
`,I={root:"p-chart"},M=V.extend({name:"chart",css:x,classes:I}),N={name:"BaseChart",extends:D,props:{type:String,data:null,options:null,plugins:null,width:{type:Number,default:300},height:{type:Number,default:150},canvasProps:{type:null,default:null}},style:M,provide:function(){return{$parentInstance:this}}},P={name:"Chart",extends:N,emits:["select","loaded"],chart:null,watch:{data:{handler:function(){this.reinit()},deep:!0},type:function(){this.reinit()},options:function(){this.reinit()}},mounted:function(){this.initChart()},beforeUnmount:function(){this.chart&&(this.chart.destroy(),this.chart=null)},methods:{initChart:function(){var t=this;j(()=>import("./auto-fe80bb03.js"),[]).then(function(a){t.chart&&(t.chart.destroy(),t.chart=null),a&&a.default&&(t.chart=new a.default(t.$refs.canvas,{type:t.type,data:t.data,options:t.options,plugins:t.plugins})),t.$emit("loaded",t.chart)})},getCanvas:function(){return this.$canvas},getChart:function(){return this.chart},getBase64Image:function(){return this.chart.toBase64Image()},refresh:function(){this.chart&&this.chart.update()},reinit:function(){this.initChart()},onCanvasClick:function(t){if(this.chart){var a=this.chart.getElementsAtEventForMode(t,"nearest",{intersect:!0},!1),n=this.chart.getElementsAtEventForMode(t,"dataset",{intersect:!0},!1);a&&a[0]&&n&&this.$emit("select",{originalEvent:t,element:a[0],dataset:n})}},generateLegend:function(){if(this.chart)return this.chart.generateLegend()}}};function i(e){"@babel/helpers - typeof";return i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(e)}function C(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,n)}return a}function O(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?C(Object(a),!0).forEach(function(n){U(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):C(Object(a)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))})}return e}function U(e,t,a){return t=R(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function R(e){var t=T(e,"string");return i(t)==="symbol"?t:String(t)}function T(e,t){if(i(e)!=="object"||e===null)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var n=a.call(e,t||"default");if(i(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var K=["width","height"];function q(e,t,a,n,r,d){return v(),y("div",b({class:e.cx("root")},e.ptm("root"),{"data-pc-name":"chart"}),[u("canvas",b({ref:"canvas",width:e.width,height:e.height,onClick:t[0]||(t[0]=function(p){return d.onCanvasClick(p)})},O(O({},e.canvasProps),e.ptm("canvas"))),null,16,K)],16)}P.render=q;const G={class:"statistics"},H={class:"statistics__filters"},J={class:"statistics__chart"},Q=u("h3",null,"График вероятность заболеваний",-1),W=S({__name:"AppStatistics",setup(e){const{forecast:t}=E(w()),{fetchForecast:a}=w(),n=o(new Date),r=o({name:"Милдью или ложная мучнистая роса",code:"mild"}),d=o([{name:"Милдью или ложная мучнистая роса",code:"mild"},{name:"Оидиум",code:"oidium"},{name:"Антракноз",code:"antra"},{name:"Серая гниль",code:"gray"},{name:"Чёрная пятнистость",code:"blackDots"},{name:"Чёрная гниль",code:"black"},{name:"Белая гниль",code:"white"},{name:"Вертициллезноеувядание (вилт)",code:"vilt"},{name:"Альтернариоз",code:"alternarioz"},{name:"Фузариоз",code:"fuzarioz"},{name:"Краснуха",code:"krasnuha"},{name:"Бактериальный рак",code:"bakterial"}]),p={mild:"Милдью или ложная мучнистая роса",oidium:"Оидиум",antra:"Антракноз",gray:"Серая гниль",blackDots:"Чёрная пятнистость",black:"Чёрная гниль",white:"Белая гниль",vilt:"Вертициллезноеувядание (вилт)",alternarioz:"Альтернариоз",fuzarioz:"Фузариоз",krasnuha:"Краснуха",bakterial:"Бактериальный рак"},h=o(),f=o(),$=async()=>{await a({lat:38.97603,lon:45.04484,disease:r.value.code,start_datetime:n.value.toLocaleDateString()})},k=()=>`#${Math.floor(Math.random()*16777215).toString(16)}`;B(t,()=>{h.value=g(),f.value=_()}),F(()=>{h.value=g(),f.value=_()});const g=()=>({labels:t.value.time,datasets:[{label:p[t.value.disease]||"",data:t.value.threat,fill:!1,borderColor:k(),tension:.4}]}),_=()=>({plugins:{legend:{position:"bottom"}},responsive:!0});return(Y,c)=>(v(),y("div",G,[u("div",H,[s(l(A),{modelValue:n.value,"onUpdate:modelValue":c[0]||(c[0]=m=>n.value=m),"date-format":"dd.mm.yy",placeholder:"Выберите дату",style:{width:"100%"}},null,8,["modelValue"]),s(l(z),{modelValue:r.value,"onUpdate:modelValue":c[1]||(c[1]=m=>r.value=m),options:d.value,optionLabel:"name",placeholder:"Выберите заболевание",style:{width:"100%"}},null,8,["modelValue","options"]),s(l(L),{label:"Применить",onClick:$})]),u("div",J,[Q,s(l(P),{type:"line",data:h.value,options:f.value,style:{height:"60vh",width:"fit-content","min-width":"60vw",margin:"0 auto","background-color":"#FAFAF8",padding:"15px"}},null,8,["data","options"])])]))}});const X={class:"statistics-page"},et=S({__name:"StatisticsView",setup(e){return(t,a)=>(v(),y("div",X,[s(W)]))}});export{et as default};
